# 预测分析：如何开始

当前数据是 **tag.xlsx Sheet2**（每条一行素材，约 37 行），已有相关性分析和标签对比。要做预测性分析，可以按下面步骤开始。

---

## 1. 先跑通入门脚本

在项目目录执行：

```bash
python predict_analysis.py
```

会得到：

- **回归**：用「标签 + 完播率 + 挑战通过率 + 报错率」等预测 **CVR（Unique redirects rate）**
- **二分类**：预测 **CVR 是否高于中位数**（高/低转化）

结果会打印在控制台，并写入 `predict_分析结果.md`。

---

## 2. 明确「预测目标」和「可用的特征」

| 你关心的问题 | 建议的预测目标（Y） | 可选特征（X） |
|-------------|---------------------|--------------|
| 素材转化好不好 | `Unique redirects rate`（CVR）或 `CTA click rate`（CTR） | 点消/拖消/目标物品、完播率、挑战通过率、报错率、时长 |
| 完播/完成情况 | `HTML completion rate` | 标签、挑战通过率、报错率 |
| 游戏参与度 | `Challenge pass 50 rate` 等 | 标签、完播率、报错率 |
| 是否「高消耗/高转化」 | 二分类：Spend 或 CVR 是否高于中位数 | 同上，注意不要用目标本身当特征 |

注意：**不要用「结果」当「原因」**。例如预测 CVR 时，不要用 Impressions、Spend、CTA clicked 等与 CVR 强同源的指标做特征，否则会信息泄漏。

---

## 3. 在脚本里改目标与特征

打开 `predict_analysis.py`：

- **换预测目标**：改 `TARGET_REGRESSION`、`TARGET_BINARY`（例如改成 `"CTA click rate"`、`"HTML completion rate"`）。
- **换特征**：改 `FEATURE_COLS` 列表，只保留你认为合理的「原因侧」指标。

保存后重新运行 `python predict_analysis.py` 即可看到新结果。

---

## 4. 样本量注意（当前约 37 行）

- 样本较少时，**回归 R² 容易偏低甚至为负**，优先看 **MAE/RMSE** 或改用 **二分类**（高/低）更稳定。
- 分类任务用 **5 折交叉验证** 的 Accuracy、F1、AUC 评估即可；样本多了再考虑单独留测试集。

---

## 5. 后续可做的扩展

- **换模型**：如 `RandomForestRegressor` / `RandomForestClassifier`（注意过拟合，用 CV 看泛化）。
- **特征筛选**：用相关性或树的 `feature_importance` 减掉无效特征。
- **更多目标**：对 CTR、完播率、挑战通过率等分别跑一遍回归/分类，对比哪个更好预测。

从「跑通 `predict_analysis.py` → 改目标/特征 → 看 `predict_分析结果.md`」就可以完成第一轮预测分析。
